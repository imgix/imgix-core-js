'use strict';var _slicedToArray=function(){function a(b,c){var d=[],e=!0,f=!1,g=void 0;try{for(var j,h=b[Symbol.iterator]();!(e=(j=h.next()).done)&&(d.push(j.value),!(c&&d.length===c));e=!0);}catch(k){f=!0,g=k}finally{try{!e&&h['return']&&h['return']()}finally{if(f)throw g}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();(function(a,b){if('function'==typeof define&&define.amd)define('Imgix',['exports','md5','js-base64'],b);else if('undefined'!=typeof exports)module.exports=b(exports,require('md5'),require('js-base64').Base64);else{a.ImgixClient=b({exports:{}}.exports,a.md5,a.Base64)}})(void 0,function(a,b,c){var f='1.0.7',g={host:null,useHTTPS:!0,includeLibraryParam:!0},h=function(){function j(k){var l,m;for(l in this.settings={},g)m=g[l],this.settings[l]=m;for(l in k)m=k[l],this.settings[l]=m;if(!this.settings.host)throw new Error('ImgixClient must be passed a valid host');this.settings.includeLibraryParam&&(this.settings.libraryParam='js-'+f),this.settings.urlPrefix=this.settings.useHTTPS?'https://':'http://'}return j.prototype.imgTag=function(k,l,m){k=this._sanitizePath(k),null==m&&(m={});var n=this._buildParams(m);return!this.settings.secureURLToken||(n=this._signParams(k,n)),'<img src="'+this.settings.urlPrefix+this.settings.host+k+n+'" alt="'+l+'">'},j.prototype.srcSet=function(k,l,m,n){var o=this;k=this._sanitizePath(k),null==n&&(n={});var p=this._buildParams(n);!this.settings.secureURLToken||(p=this._signParams(k,p));var q={},r=n.w/n.h;m.forEach(function(x){n.w=parseInt(x.substring(0,x.length-1)),n.h=n.width/n.ratio;var y=o._buildParams(n);!o.settings.secureURLToken||(y=o._signParams(k,y)),q[x]=o.settings.urlPrefix+o.settings.host+k+y});var s='',_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var w,v=Object.entries(q)[Symbol.iterator]();!(_iteratorNormalCompletion=(w=v.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(w.value,2),t=_step$value[0],u=_step$value[1];s+=u+' '+t+', '}}catch(x){_didIteratorError=!0,_iteratorError=x}finally{try{!_iteratorNormalCompletion&&v.return&&v.return()}finally{if(_didIteratorError)throw _iteratorError}}return s=s.substring(0,s.length-2),'<img src="'+this.settings.urlPrefix+this.settings.host+k+p+'" alt="'+l+'" srcset="'+s+'">'},j.prototype.buildURL=function(k,l){k=this._sanitizePath(k),null==l&&(l={});var m=this._buildParams(l);return!this.settings.secureURLToken||(m=this._signParams(k,m)),this.settings.urlPrefix+this.settings.host+k+m},j.prototype._sanitizePath=function(k){return k=k.replace(/^\//,''),k=/^https?:\/\//.test(k)?encodeURIComponent(k):/^https?%3A%2F%2F/.test(k)?decodeURIComponent(encodeURIComponent(k)):decodeURI(encodeURI(k)),'/'+k},j.prototype._buildParams=function(k){this.settings.libraryParam&&(k.ixlib=this.settings.libraryParam);var m,n,o,p,l=[];for(m in k)n=k[m],o=encodeURIComponent(m),p,p='64'===m.substr(-2)?c.encodeURI(n):encodeURIComponent(n),l.push(o+'='+p);return l[0]&&(l[0]='?'+l[0]),l.join('&')},j.prototype._signParams=function(k,l){var m=this.settings.secureURLToken+k+l,n=b(m);return 0<l.length?l=l+'&s='+n:l='?s='+n},j.VERSION=f,j}();return h});
